# ===========================================
# Development Dockerfile
# Optimized for development with hot reload
# ===========================================

# Base stage for common dependencies
FROM node:20-alpine AS base
RUN npm install -g pnpm
WORKDIR /app
COPY package.json pnpm-lock.yaml ./
COPY prisma ./prisma

# Development stage (used by docker-compose.override.yml for hot reload)
FROM base AS development
RUN npm install -g nodemon ts-node
RUN pnpm install
COPY . .
RUN mkdir -p /app/logs
EXPOSE 8000
CMD ["pnpm", "dev"]
